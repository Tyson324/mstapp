<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Loop</title> 



		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />



		
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script src="http://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
		
		
	</head>
	<body>
		<div class="container demo-1">
			<!-- Top Navigation -->
			<div class="codrops-top clearfix">
				
			</div>
			<header>
				<h1>Hey there! <span>Tell us a little about yourself.</span></h1>	
			</header>
            <div id="nugget">
                <div class="main clearfix">
				<form id="nl-form" class="nl-form">
					My preferred name is <input type="text" value="" id="asdf" placeholder="Name" data-subline="This will be on your profile here at loop!"/>
					
					and I am located in
					<select id="asd">
						<option value="TVP" selected>TVP</option>
						
					</select>
				
					<select id="as">
						<option value="Building 1" selected>Building 1</option>
						<option value="Building 2">Building 2</option>
						<option value="Building 3">Building 3</option>
						<option value="Building 4">Building 4</option>
						<option value="Building 2">Building 5</option>
					</select>
					<select id="ad">
						<option value="Floor 1" selected>Floor 1</option>
					 	<option value="Floor 2">Floor 2</option>
					 	<option value="Floor 3">Floor 3</option>
					</select>
					
					<div class="nl-submit-wrap">
						<button class="nl-submit" type="submit">Done!</button>
					</div>
					<div class="nl-overlay"></div>
				</form>
			</div>
            </div>
			
		</div><!-- /container -->
		<script src="js/nlform.js"></script>
		<script>

			var nlform = new NLForm( document.getElementById( 'nl-form' ) );

			Parse.initialize("KC1eJ0pORqFD9mnj6jxrFTKlHKE5Ou32d8ULgOkR", "DiSSicuCql0ZE9FH4tghrRDY5pv8CZtQMq7jBipQ");


      
            $('#submitnl').click( 
              function(event){

              	event.preventDefault();

                

                


                  var putUserData = Parse.Object.extend('profileData');
	              var userData = new putUserData();
	              var perfName = $('#asdf').val();
	              var site = $('#asd').val();
	              var building = $('#as').val();
	              var floor = $('#ad').val();
	              var user = $.cookie('username');
	              userData.set('User', user);
	              userData.set('perfName', perfName);
	              userData.set('site', site);
	              userData.set('building', building);
	              userData.set('floor', floor);
	              userData.save(null, {
                success: function (tableobject) {
                  // Execute any logic that should take place after the object is saved.





                  alert('New object created with objectId: ' + tableobject.id);
                  var SubjectSaveId = tableobject.id



                  	var user = Parse.User.current();
                  	alert(user);

                  	user.save(null, {
                  		success: function(user) {
                  			user.set("FirstTime", false);
                  			user.save();
                  		}
                  	});



                  window.location.replace("../DragDropInteractions/index.html");
                },
                error: function (tableobject, error) {
                  // Execute any logic that should take place if the save fails.
                  // error is a Parse.Error with an error code and description.
                  alert('Failed to create new object, with error code: ' + error.description);
                }
              });
          	

                });

              


              

		</script>
	</body>
</html>